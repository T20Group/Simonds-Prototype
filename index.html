<!DOCTYPE html>
<html>

<head>
<title>Simonds Prototype</title>
<meta name = "viewport" content ="width=device-width, minimum-scale=1, maximum-scale=1">

<!-- META -->
<meta charset = "utf-8">

<!-- CSS -->
<link rel = "stylesheet" href = "css/reset.css" />
<link rel = "stylesheet" href = "css/slide-default.css" />
<link rel = "stylesheet" media = "screen" href = "css/slide-common.css" />
<link rel = "stylesheet" href = "css/styles.css" />

<!-- JS -->
<script src = "js/jquery-1.8.2.min.js"></script>
<script src = "js/jquery.easing-1.3.js"></script>
<script src = "js/jquery.cookie.js"></script>
<script src = "js/jquery.mobile-events.min.js"></script>
<script src = "js/jquery.iosslider.js"></script>

<script src="js/script.js"></script>
	
<script type="text/javascript">
$(function() {
	
	// LAYER VARiABLES
	var $overlay = $('#overlay');
	var $content = $('#content');
	
	
	
	$('.link').tapstart(function(e, touch) {
		var t = $(this).attr('data-view');
		$content.load(t);
		return false; 
	});
	
	
	$('.cookie').tapstart(function(e, touch) {
		var val = $(this).text();
		var t = $(this).attr('data-view');
		
		// find location of DL using watchdog
		$.cookie('homes', val);
		$content.load(t);
		//alert(t);
		return false;
	});
	
	// 	/127.0.0.1:8080/repo/e9d805fa771f047f60fedcd96a2947d4930bdb6b/
	
	$('.delcookie').click(function() {
		// issues deleting cookie on DL 
		$.removeCookie('homes', { path: '/' });
		return false;
	})
	
	
	// GET JSON file
	$.getJSON("homes.json", function(data) {		
//		console.log(data.homes[1].floorplan.length);
	}).error(function(xhr) {
        alert(xhr.responseText);
    });
    
    
    /*
	    
	    
	*/
    
    // GENERATE HOMES
    
    var $target = $('#homes-filter-container');
    
    $.getJSON("homes.json", function(data) {		
		$.each(data.homes, function(name, val) {
			// append dynamic homes
					
			var id = val.id;
			var name = val.name;
			var storey = val.floorplan[0].storey;
			var bed = val.floorplan[0].bed;
			var bath = val.floorplan[0].bath;
			var car = val.floorplan[0].car;
			var homes = '<div id="homes'+id+'" class="homes" data-storey="'+storey+'" data-id="'+id+'"><div class="homesImg"><img src="images/homes/'+id+'.jpg" />id: '+id+' storey: '+storey+' bed: '+ bed +' bath: '+bath+' car: '+car+'</div><div class="homesTitle">'+name+'</div></div>';
			
			$target.append(homes);
			
		});
	});
	
	// binds dynamically generated .homes filter within $target to 
	$target.on('tapstart', '.homes', function(e) {
		
		// store cookie
		var val = $(this).attr('data-id');
		$.cookie('homes', val);
		
		// update content DIV
		$content.load('content_homes.html');
		

	});
	
	$('.storey').on('tapstart', function(e) {
		
		var val = $(this).attr('data-storey');
		
		$('.homes').addClass('hidden');
		$('.homes').filter(function() {
			
			var t = $(this).attr('data-storey');
			if (val==t) {
				$(this).removeClass('hidden');	
			}
			
		});
		
		return false;
	});
	
});
</script>

</head>

<body>

<div id="main-container">

<div id="overlay" class="container">
	

	
    <!-- 
	Overlay contents ONLY
	Contents with single CLOSE functionality that's all 
	
	CONTENTS
	- show tutorial page
	- show share page
	
	-->
    overlay layer    
</div> <!-- /overlay -->

<div id="navigation" class="container">
    <!-- 
	Navigation layer, Interface layer
	Controls overall page navigation and Content DIV
	
	All controls here

	- Navigational control
	- Favorite control
	- Promo control
	- Floorplan control
	- Live mini floorplan
	- Gallery Control
	-->
    nav
    
    <div id="main-control">
<!--
	    <a data-view="content_gallery.html" href="#" class="link">Open div href</a><br/>
	    <a data-view="content_cookie.html" href="#" class="cookie">7</a><br/>
	    <a data-view="content_cookie.html" href="#" class="cookie">16</a><br/>
	    <a data-view="content_cookie.html" href="#" class="cookie">23</a><br/>
	    <a href="#" class="delcookie">Delete cookie</a><br/>
-->
	    
	    <br/>
	    <br/>
	    
	    <a href="#" class="storey" data-storey="1">Single</a> | <a href="#" class="storey" data-storey="2">Double</a>
    </div> <!-- /main-control -->
    
    <div id="homes-filter-container"> <!-- MOVE this whole DIV to reposition layers including the "cleared" DIV-->
		<!--
			<div id="homes01" class="homes">
				<div class="homesImg">img here</div>
				<div class="homesTitle">Title here</div>
			</div>
		-->
	</div> <!-- /homesHolder-->
	<div class="cleared"></div>
	
	
</div> <!-- /navigation -->

<div id="content" class="container">

	<!--
	Shows only content, NO navigational, NO triggers here.
	
	- show floorplans, show floorplan options
	- show gallery images
	- show homes images
	- show promo video/poster
	- show favorite
	
	- MAY contain relative navigation
	
	-->
	content layer <br/>
	verson: cookie
</div> <!-- /content -->
		
</div> <!-- /main-container -->		
	
</body>

</html>