<!DOCTYPE html>
<html>

<head>
<title>Simonds Prototype</title>
<meta name = "viewport" content ="width=device-width, minimum-scale=1, maximum-scale=1">

<!-- META -->
<meta charset = "utf-8">

<!-- CSS -->
<link rel = "stylesheet" href = "css/reset.css" />
<link rel = "stylesheet" href = "css/styles.css" />

<!-- JS -->
<script src = "js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.cookie.js"></script>

<script src="js/script.js"></script>
	
<script type="text/javascript">
$(function() {
	
	// LAYER VARiABLES
	var $overlay = $('#overlay');
	var $content = $('#content');
	
	
	
	$('.link').click(function() {
		var t = $(this).attr('href');
		$content.load(t);
		
		return false; 
	});
	
	
	$('.cookie').click(function() {
		var val = $(this).text();
		var t = $(this).attr('href');
		
		// find location of DL using watchdog
		$.cookie('homes', val);
		$content.load(t);
		//alert(t);
		return false;
	});
	
	// 	/127.0.0.1:8080/repo/e9d805fa771f047f60fedcd96a2947d4930bdb6b/
	
	$('.delcookie').click(function() {
		// issues deleting cookie on DL 
		$.removeCookie('homes', { path: '/' });
		return false;
	})
	
	
	// GET JSON file
	$.getJSON("homes.json", function(data) {		
//		console.log(data.homes[1].floorplan.length);
	}).error(function(xhr) {
        alert(xhr.responseText);
    });
    
    
    /*
	    
	    
	*/
    
    // GENERATE HOMES
    
    var $target = $('#homesHolder');
    
    $.getJSON("homes.json", function(data) {		
		$.each(data.homes, function(name, val) {
			// append dynamic homes
					
			var $id = val.id;
			var $name = val.name;
			var $storey = val.floorplan[0].storey;
			var $bed = val.floorplan[0].bed;
			var $bath = val.floorplan[0].bath;
			var $car = val.floorplan[0].car;
			var homes = '<div id="homes'+$id+'" class="homes" data-storey="'+$storey+'"><div class="homesImg">id: '+$id+' storey: '+$storey+' bed: '+ $bed +' bath: '+$bath+' car: '+$car+'</div><div class="homesTitle">'+$name+'</div></div>';
			
			$target.append(homes);
			
		});
	});
	
	// binds dynamically generated .homes filter within $target to 
	$target.on('click', '.homes', function(e) {
		var t = $(this).attr('id');
		alert(t);
		// insert function 
	});
	
	$('.storey').on('click', function(e) {
		
		var val = $(this).attr('data-storey');
		
		$('.homes').addClass('hidden');
		$('.homes').filter(function() {
			
			var t = $(this).attr('data-storey');
			if (val==t) {
				$(this).removeClass('hidden');	
			}
			
		});
		
		return false;
	});

});
</script>

</head>

<body>

<div id="overlay">
    <!-- 
	Overlay contents ONLY
	Contents with single CLOSE functionality that's all 
	
	CONTENTS
	- show tutorial page
	- show share page
	
	-->
    overlay layer
</div> <!-- /overlay -->

<div id="navigation">
    <!-- 
	Navigation layer, Interface layer
	Controls overall page navigation and Content DIV
	
	All controls here

	- Navigational control
	- Favorite control
	- Promo control
	- Floorplan control
	- Live mini floorplan
	- Gallery Control
	-->
    nav
    
    <div id="main-control">
	    <a href="content_gallery.html" class="link">Open div href</a><br/>
	    <a href="content_cookie.html" class="cookie">7</a><br/>
	    <a href="content_cookie.html" class="cookie">16</a><br/>
	    <a href="content_cookie.html" class="cookie">23</a><br/>
	    <a href="#" class="delcookie">Delete cookie</a><br/>
	    
	    <br/>
	    <br/>
	    
	    <a href="#" class="storey" data-storey="1">Single</a> | <a href="#" class="storey" data-storey="2">Double</a>
    </div> <!-- /main-control -->
</div> <!-- /navigation -->

<div id="content">
		<div id="homesHolder"> <!-- MOVE this whole DIV to reposition layers including the "cleared" DIV-->
		<!--
			<div id="homes01" class="homes">
				<div class="homesImg">img here</div>
				<div class="homesTitle">Title here</div>
			</div>
		-->
		</div> <!-- /homesHolder-->
		<div class="cleared"></div>
		
		
	<!--
	Shows only content, NO navigational, NO triggers here.
	
	- show floorplans, show floorplan options
	- show gallery images
	- show homes images
	- show promo video/poster
	- show favorite
	
	- MAY contain relative navigation
	
	-->
	content layer <br/>
	verson: cookie
</div> <!-- /content -->
			
</body>

</html>